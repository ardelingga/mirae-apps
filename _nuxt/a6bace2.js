(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{887:function(e,t,r){var content=r(910);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(166).default)("4052fa29",content,!0,{sourceMap:!1})},909:function(e,t,r){"use strict";r(887)},910:function(e,t,r){var o=r(165)((function(i){return i[1]}));o.push([e.i,".ck-editor__editable{min-height:400px}.dropdown-menu{max-height:200px;overflow-y:auto}.dropdown-item{align-items:center;cursor:pointer;display:flex;height:45px;padding:0 10px}.show{display:block}",""]),o.locals={},e.exports=o},964:function(e,t,r){"use strict";r.r(t);r(64);var o=r(80),n=(r(211),r(8),r(119),r(124),{layout:"admin/main",head:function(){return{title:"Tambah Transaksi - Mirae Apps",script:[{src:"/admin/vendors/typeahead.js/typeahead.bundle.min.js",body:!0},{src:"/admin/vendors/select2/select2.min.js",body:!0},{src:"/admin/js/file-upload.js",body:!0},{src:"/admin/js/typeahead.js",body:!0},{src:"/admin/js/select2.js",body:!0}],link:[{rel:"stylesheet",href:"/admin/vendors/select2/select2.min.css"},{rel:"stylesheet",href:"/admin/vendors/select2-bootstrap-theme/select2-bootstrap.min.css"}]}},components:{"ckeditor-nuxt":function(){return r.e(0).then(r.t.bind(null,941,7))}},data:function(){return{isLoading:{saveDataProduct:!0},product:{id:null,code_product:"",name:"",price:0,type:"",stock:0},validation:[]}},mounted:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.generateCodeProduct();case 2:e.product.code_product=t.sent;case 3:case"end":return t.stop()}}),t)})))()},beforeDestroy:function(){},methods:{fetchDataProducts:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var r,data;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.isLoading.fetchDataProducts=!0,console.log("Fetching Data Products"),t.prev=2,t.next=5,fetch("https://script.google.com/macros/s/AKfycbyGOMw-RJt2ag4-W5hbleOQsUDOXOmczeIn_O84qz2z_5xoxfYvrT0j9EvFu-Vv46nc/exec?service=product&method=get&path=read&search=&page=1&length=1000000&sortedBy=asc",{method:"GET"});case 5:if((r=t.sent).ok){t.next=8;break}throw new Error("Network response was not ok");case 8:return t.next=10,r.json();case 10:if(200==(data=t.sent).code){t.next=13;break}throw new Error("".concat(data.message));case 13:e.products=data.data.products,console.log("PRINT DATA PRODUCT"),console.log(e.products),t.next=22;break;case 18:t.prev=18,t.t0=t.catch(2),console.error("Error:",t.t0),e.$swal.fire({title:"Error",text:"Terjadi Kesalahan Pada Sistem! ".concat(t.t0.message),icon:"error"});case 22:e.isLoading.fetchDataProducts=!1;case 23:case"end":return t.stop()}}),t,null,[[2,18]])})))()},generateCodeProduct:function(){return Object(o.a)(regeneratorRuntime.mark((function e(){var t,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Date.now(),r="MRE-P".concat(t),console.log(r),e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)})))()},validateDataFormProduct:function(){console.log("VALIDATE FORM TRANSACTION"),console.log(this.product);var e={isValid:!1,message:"",data:null},t={id:null,code:this.product.code_product,name:this.product.name,price:this.product.price,type:this.product.type,stock:this.product.stock};return""==t.name||null==t.name?(e.isValid=!1,e.message="Nama produk harus diisi!",e):0==t.price||""==t.price||null==t.price?(e.isValid=!1,e.message="Harga produk tidak boleh 0 dan harus diisi!",e):""==t.type||null==t.type?(e.isValid=!1,e.message="Tipe produk harus dipilih!",e):0==t.stock||""==t.stock||null==t.stock?(e.isValid=!1,e.message="Stok produk tidak boleh 0 dan harus diisi!",e):(e.isValid=!0,e.message="Form produk valid",e.data=t,e)},actionSaveProduct:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var r,o,n,data;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(console.log("ACTION CREATE TRANSACTION"),console.log("PRINT FORM PRODUCT"),console.log(e.product),r=e.validateDataFormProduct(),console.log("VALIDATE DATA FORM PRODUCT"),console.log(r),r.isValid){t.next=9;break}return e.$swal.fire({title:"Form Transaksi Tidak Valid",text:"".concat(r.message),icon:"warning",showCancelButton:!1,confirmButtonColor:"#3085d6",confirmButtonText:"Oke"}),t.abrupt("return");case 9:return e.$swal.fire({title:"Menambahkan Data Transaksi!",timerProgressBar:!0,text:"Please wait...",didOpen:function(){e.$swal.showLoading()},willClose:function(){}}).then((function(e){})),console.log("PAYLOAD"),console.log(r.data),o={path:"create",method:"post",service:"product",product:r.data},t.prev=13,t.next=16,fetch("https://script.google.com/macros/s/AKfycbyGOMw-RJt2ag4-W5hbleOQsUDOXOmczeIn_O84qz2z_5xoxfYvrT0j9EvFu-Vv46nc/exec",{method:"POST",body:JSON.stringify(o)});case 16:if((n=t.sent).ok){t.next=19;break}throw new Error("Network response was not ok");case 19:return t.next=21,n.json();case 21:if(200==(data=t.sent).code){t.next=24;break}throw new Error("".concat(data.message));case 24:e.$router.push({name:"admin-product"}),e.$swal.fire({title:"BERHASIL!",text:"Data Transaksi Berhasil Disimpan!",icon:"success",showConfirmButton:!1,timer:2e3}),t.next=32;break;case 28:t.prev=28,t.t0=t.catch(13),console.error("Error:",t.t0),e.$swal.fire({title:"Error",text:"Terjadi Kesalahan Pada Sistem! ".concat(t.t0.message),icon:"error"});case 32:case"end":return t.stop()}}),t,null,[[13,28]])})))()}},watch:{},computed:{}}),c=(r(909),r(77)),component=Object(c.a)(n,(function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"card"},[t("div",{staticClass:"card-body"},[t("h4",{staticClass:"card-title"},[e._v("Tambah Data Produk")]),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-md-12"},[t("div",{staticClass:"form-group"},[t("label",{attrs:{for:"exampleInputName1"}},[e._v("Kode Produk")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.product.code_product,expression:"product.code_product"}],staticClass:"form-control",attrs:{type:"text",id:"kodeProduk",placeholder:"Kode Produk",disabled:""},domProps:{value:e.product.code_product},on:{input:function(t){t.target.composing||e.$set(e.product,"code_product",t.target.value)}}})]),e._v(" "),t("div",{staticClass:"form-group"},[t("label",{attrs:{for:"exampleInputName1"}},[e._v("Nama Produk")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.product.name,expression:"product.name"}],staticClass:"form-control",attrs:{type:"text",id:"namaProduk",placeholder:"Masukan Nama Produk"},domProps:{value:e.product.name},on:{input:function(t){t.target.composing||e.$set(e.product,"name",t.target.value)}}})]),e._v(" "),t("div",{staticClass:"form-group"},[t("label",{attrs:{for:"exampleInputName1"}},[e._v("Harga Produk")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.product.price,expression:"product.price"}],staticClass:"form-control",attrs:{type:"number",id:"hargaProduk",placeholder:"Masukan Harga Produk"},domProps:{value:e.product.price},on:{input:function(t){t.target.composing||e.$set(e.product,"price",t.target.value)}}})]),e._v(" "),t("div",{staticClass:"form-group"},[t("label",[e._v("Jenis Produk")]),e._v(" "),t("v-select",{attrs:{options:["Barang","Jasa"],height:"0",id:"typeProduk",placeholder:"Pilih Jenis Produk"},model:{value:e.product.type,callback:function(t){e.$set(e.product,"type",t)},expression:"product.type"}})],1),e._v(" "),t("div",{staticClass:"form-group"},[t("label",{attrs:{for:"exampleInputName1"}},[e._v("Stok")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.product.stock,expression:"product.stock"}],staticClass:"form-control",attrs:{type:"number",id:"stokProduk",placeholder:"Masukan Stok Produk"},domProps:{value:e.product.stock},on:{input:function(t){t.target.composing||e.$set(e.product,"stock",t.target.value)}}})])])]),e._v(" "),t("div",{staticClass:"row mt-5"},[t("div",{staticClass:"col-md-12"},[t("button",{staticClass:"btn btn-success mr-2 w-100",attrs:{type:"submit"},on:{click:function(t){return e.actionSaveProduct()}}},[t("b",[e._v("Simpan\n              Produk")])]),e._v(" "),t("NuxtLink",{staticClass:"btn btn-secondary mt-3 w-100",attrs:{to:{name:"admin-product"}}},[e._v("\n            Batal\n          ")])],1)])])])])}),[],!1,null,null,null);t.default=component.exports}}]);