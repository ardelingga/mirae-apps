(window.webpackJsonp=window.webpackJsonp||[]).push([[44],{883:function(t,n,e){var map={"./af":747,"./af.js":747,"./ar":748,"./ar-dz":749,"./ar-dz.js":749,"./ar-kw":750,"./ar-kw.js":750,"./ar-ly":751,"./ar-ly.js":751,"./ar-ma":752,"./ar-ma.js":752,"./ar-ps":753,"./ar-ps.js":753,"./ar-sa":754,"./ar-sa.js":754,"./ar-tn":755,"./ar-tn.js":755,"./ar.js":748,"./az":756,"./az.js":756,"./be":757,"./be.js":757,"./bg":758,"./bg.js":758,"./bm":759,"./bm.js":759,"./bn":760,"./bn-bd":761,"./bn-bd.js":761,"./bn.js":760,"./bo":762,"./bo.js":762,"./br":763,"./br.js":763,"./bs":764,"./bs.js":764,"./ca":765,"./ca.js":765,"./cs":766,"./cs.js":766,"./cv":767,"./cv.js":767,"./cy":768,"./cy.js":768,"./da":769,"./da.js":769,"./de":770,"./de-at":771,"./de-at.js":771,"./de-ch":772,"./de-ch.js":772,"./de.js":770,"./dv":773,"./dv.js":773,"./el":774,"./el.js":774,"./en-au":775,"./en-au.js":775,"./en-ca":776,"./en-ca.js":776,"./en-gb":777,"./en-gb.js":777,"./en-ie":778,"./en-ie.js":778,"./en-il":779,"./en-il.js":779,"./en-in":780,"./en-in.js":780,"./en-nz":781,"./en-nz.js":781,"./en-sg":782,"./en-sg.js":782,"./eo":783,"./eo.js":783,"./es":784,"./es-do":785,"./es-do.js":785,"./es-mx":786,"./es-mx.js":786,"./es-us":787,"./es-us.js":787,"./es.js":784,"./et":788,"./et.js":788,"./eu":789,"./eu.js":789,"./fa":790,"./fa.js":790,"./fi":791,"./fi.js":791,"./fil":792,"./fil.js":792,"./fo":793,"./fo.js":793,"./fr":794,"./fr-ca":795,"./fr-ca.js":795,"./fr-ch":796,"./fr-ch.js":796,"./fr.js":794,"./fy":797,"./fy.js":797,"./ga":798,"./ga.js":798,"./gd":799,"./gd.js":799,"./gl":800,"./gl.js":800,"./gom-deva":801,"./gom-deva.js":801,"./gom-latn":802,"./gom-latn.js":802,"./gu":803,"./gu.js":803,"./he":804,"./he.js":804,"./hi":805,"./hi.js":805,"./hr":806,"./hr.js":806,"./hu":807,"./hu.js":807,"./hy-am":808,"./hy-am.js":808,"./id":746,"./id.js":746,"./is":809,"./is.js":809,"./it":810,"./it-ch":811,"./it-ch.js":811,"./it.js":810,"./ja":812,"./ja.js":812,"./jv":813,"./jv.js":813,"./ka":814,"./ka.js":814,"./kk":815,"./kk.js":815,"./km":816,"./km.js":816,"./kn":817,"./kn.js":817,"./ko":818,"./ko.js":818,"./ku":819,"./ku-kmr":820,"./ku-kmr.js":820,"./ku.js":819,"./ky":821,"./ky.js":821,"./lb":822,"./lb.js":822,"./lo":823,"./lo.js":823,"./lt":824,"./lt.js":824,"./lv":825,"./lv.js":825,"./me":826,"./me.js":826,"./mi":827,"./mi.js":827,"./mk":828,"./mk.js":828,"./ml":829,"./ml.js":829,"./mn":830,"./mn.js":830,"./mr":831,"./mr.js":831,"./ms":832,"./ms-my":833,"./ms-my.js":833,"./ms.js":832,"./mt":834,"./mt.js":834,"./my":835,"./my.js":835,"./nb":836,"./nb.js":836,"./ne":837,"./ne.js":837,"./nl":838,"./nl-be":839,"./nl-be.js":839,"./nl.js":838,"./nn":840,"./nn.js":840,"./oc-lnc":841,"./oc-lnc.js":841,"./pa-in":842,"./pa-in.js":842,"./pl":843,"./pl.js":843,"./pt":844,"./pt-br":845,"./pt-br.js":845,"./pt.js":844,"./ro":846,"./ro.js":846,"./ru":847,"./ru.js":847,"./sd":848,"./sd.js":848,"./se":849,"./se.js":849,"./si":850,"./si.js":850,"./sk":851,"./sk.js":851,"./sl":852,"./sl.js":852,"./sq":853,"./sq.js":853,"./sr":854,"./sr-cyrl":855,"./sr-cyrl.js":855,"./sr.js":854,"./ss":856,"./ss.js":856,"./sv":857,"./sv.js":857,"./sw":858,"./sw.js":858,"./ta":859,"./ta.js":859,"./te":860,"./te.js":860,"./tet":861,"./tet.js":861,"./tg":862,"./tg.js":862,"./th":863,"./th.js":863,"./tk":864,"./tk.js":864,"./tl-ph":865,"./tl-ph.js":865,"./tlh":866,"./tlh.js":866,"./tr":867,"./tr.js":867,"./tzl":868,"./tzl.js":868,"./tzm":869,"./tzm-latn":870,"./tzm-latn.js":870,"./tzm.js":869,"./ug-cn":871,"./ug-cn.js":871,"./uk":872,"./uk.js":872,"./ur":873,"./ur.js":873,"./uz":874,"./uz-latn":875,"./uz-latn.js":875,"./uz.js":874,"./vi":876,"./vi.js":876,"./x-pseudo":877,"./x-pseudo.js":877,"./yo":878,"./yo.js":878,"./zh-cn":879,"./zh-cn.js":879,"./zh-hk":880,"./zh-hk.js":880,"./zh-mo":881,"./zh-mo.js":881,"./zh-tw":882,"./zh-tw.js":882};function r(t){var n=o(t);return e(n)}function o(t){if(!e.o(map,t)){var n=new Error("Cannot find module '"+t+"'");throw n.code="MODULE_NOT_FOUND",n}return map[t]}r.keys=function(){return Object.keys(map)},r.resolve=o,t.exports=r,r.id=883},956:function(t,n,e){"use strict";e.r(n);e(39),e(300);var r=e(1),o=e(80),c=(e(44),e(8),e(211),e(745)),l=e.n(c),d=(e(746),Object(r.a)(Object(r.a)({layout:"admin/main",head:function(){return{title:"Transaction - Mirae Carwash"}},data:function(){return{isLoading:{getTransaction:!0},transactions:[],pagination:{},search:"",page:1,length:10}},watchQuery:["search","page","length"],asyncData:function(t){return Object(o.a)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:t.$axios,t.query;case 1:case"end":return n.stop()}}),n)})))()},mounted:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:t.page=t.$route.query.page?parseInt(t.$route.query.page):1,t.length=t.$route.query.length?parseInt(t.$route.query.length):10,t.search=t.$route.query.search?t.$route.query.search:"",t.fetchDataTransactions();case 4:case"end":return n.stop()}}),n)})))()},methods:{fetchDataTransactions:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function n(){var e,data;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t.isLoading.getTransaction=!0,n.prev=1,n.next=4,fetch("https://script.google.com/macros/s/AKfycbyGOMw-RJt2ag4-W5hbleOQsUDOXOmczeIn_O84qz2z_5xoxfYvrT0j9EvFu-Vv46nc/exec?service=steam_transaction&method=get&path=read&search=".concat(t.search,"&page=").concat(t.page,"&length=").concat(t.length,"&sortedBy=desc"),{method:"GET"});case 4:if((e=n.sent).ok){n.next=7;break}throw new Error("Network response was not ok");case 7:return n.next=9,e.json();case 9:if(200==(data=n.sent).code){n.next=12;break}throw new Error("".concat(data.message));case 12:console.log("PRINT DATA"),console.log(data),t.transactions=data.data.transactions,t.pagination=data.data,n.next=24;break;case 18:n.prev=18,n.t0=n.catch(1),console.error("Error:",n.t0),t.$swal.fire({title:"Error",text:"Terjadi Kesalahan Pada Sistem! ".concat(n.t0.message),icon:"error"}),t.transactions=[],t.pagination={};case 24:t.isLoading.getTransaction=!1;case 25:case"end":return n.stop()}}),n,null,[[1,18]])})))()},changePage:function(t){this.page=t,this.fetchDataTransactions()},searchData:function(){this.fetchDataTransactions()},deletePost:function(t){var n=this;this.$swal.fire({title:"Apakah Anda Yakin ?",text:"Ingin Menghapus Data Ini !",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"YA, HAPUS!",cancelButtonText:"TIDAK"}).then((function(e){e.isConfirmed&&n.$axios.delete("/api/admin/posts/".concat(t)).then((function(){n.$nuxt.refresh(),n.$swal.fire({title:"BERHASIL!",text:"Data Berhasil Dihapus!",icon:"success",showConfirmButton:!1,timer:2e3})}))}))},printInvoince:function(t){for(var n=window.open("","","height=400,width=800"),e="",i=0;i<t.detail_transactions.length;i++){var r=t.detail_transactions,o=r[i].product_name;e+='\n              <tr>\n                <td colspan="4">'.concat(o,'</td>\n              </tr>\n              <tr>\n                <td></td>\n                <td class="align-right">').concat(r[i].quantity,'</td>\n                <td class="align-right">').concat(this.formatCurrency(r[i].price),'</td>\n                <td class="align-right">').concat(this.formatCurrency(r[i].total_price),"</td>\n              </tr>\n        ")}var c='\n            <table class="table" border="0">\n              '.concat(e,'\n              <tr><td colspan="4"><hr></td></tr>\n              <tr>\n                <td colspan="3" class="align-right">Sub Total:</td>\n                <td class="align-right">').concat(this.formatCurrency(t.total_price),'</td>\n              </tr>\n              <tr>\n                <td colspan="3" class="align-right">Discount Rp:</td>\n                <td class="align-right">0</td>\n              </tr>\n              <tr>\n                <td colspan="3" class="align-right">Grand Total : </td>\n                <td class="align-right">').concat(this.formatCurrency(t.total_price),'</td>\n              </tr>\n              <tr>\n                <td colspan="3" class="align-right">Bayar : </td>\n                <td class="align-right">').concat(this.formatCurrency(t.total_payment),'</td>\n              </tr>\n              <tr>\n                <td colspan="3" class="align-right">Kembalian : </td>\n                <td class="align-right">').concat(this.formatCurrency(t.money_changes),'</td>\n              </tr>\n              <tr>\n                <td colspan="4" class="center-text">\n                  Kasir: Admin | Bayar: ').concat(t.payment_method,"\n                </td>\n              </tr>\n            </table>\n      "),l='\n      <!DOCTYPE html>\n      <html lang="en">\n      <head>\n        <meta charset="UTF-8">\n        <meta name="viewport" content="width=device-width, initial-scale=1.0">\n        <title>Cetak Struk '.concat(t.code_transaction,'</title>\n        <style>\n          body {\n            font-family: Verdana, sans-serif;\n            font-size: 12px;\n          }\n          .container {\n            max-width: 240px;\n            margin: auto;\n            padding: 10px;\n          }\n          table {\n            width: 100%;\n            border-collapse: collapse;\n          }\n          td {\n            padding: 2px 4px;\n          }\n          hr {\n            border: none;\n            border-top: 1px solid #000;\n          }\n          .align-right {\n            text-align: right;\n          }\n          .center-text {\n            text-align: center;\n          }\n          .table-border {\n            border: 1px solid #000;\n          }\n        </style>\n      </head>\n      <body>\n        <div class="container">\n          <div class="col-md-10 col-md-offset-1">\n            <table>\n              <tr>\n                <td align="center" colspan="4">\n                  MIRAE CARWASH<br>\n                  Jl. Inspeksi Kalimalang <br>\n                  No.3, RT.1/RW.3, Pd.Kelapa, <br>\n                  Kota Jakarta Timur<br>\n                  085179962334\n                </td>\n              </tr>\n              <tr><td colspan="4"><hr></td></tr>\n              <tr>\n                <td>').concat(t.code_transaction,'</td>\n                <td align="right" colspan="3">').concat(this.formatDate(t.created_at),'</td>\n              </tr>\n              <tr>\n                <td></td>\n                <td align="right" colspan="3"></td>\n              </tr>\n              <tr>\n                <td colspan="4">').concat(t.customer_name,'</td>\n              </tr>\n              <tr><td colspan="4"><hr></td></tr>\n            </table>\n            ').concat(c,'\n            <p class="center-text">\n              Jika ada bagian yg terlewat kirim photo/video pada kami, Beri kami kesempatan perbaiki.<br>Terima kasih 🙏.\n            </p>\n          </div>\n        </div>\n      </body>\n      </html>\n      ');n.document.write(l),n.document.close(),n.print()},showModalDetailTransaction:function(t){document.getElementById("titleLabelDetailTransactionModal").innerHTML="DETAIL TRANSAKSI <b> ".concat(t.code_transaction," </b>");for(var n="",e=t.detail_transactions,i=0;i<e.length;i++){n+='\n            <tr>\n              <td class="text-center">'.concat(i+1,"</td>\n              <td>").concat(e[i].product_code?e[i].product_code:"","</td>\n              <td>").concat(e[i].product_name?e[i].product_name:"","</td>\n              <td>").concat(e[i].product_price?this.formatCurrency(e[i].product_price):"","</td>\n              <td>").concat(e[i].quantity?e[i].quantity:"","</td>\n              <td>").concat(e[i].total_price?this.formatCurrency(e[i].total_price):"","</td>\n            </tr>\n        ")}n+='\n            <tr>\n              <td colspan="5" style="text-align: right;"><b>Total:</b></td>\n              <td> <b> '.concat(this.formatCurrency(t.total_price)," </b></td>\n            </tr>\n      ");var r='\n        <table class="table table-hover table-bordered">\n          <thead>\n            <tr class="text-center">\n              <th>No</th>\n              <th>Kode Produk</th>\n              <th>Nama Produk</th>\n              <th>Harga</th>\n              <th>Quantity</th>\n              <th>Total Harga</th>\n            </tr>\n          </thead>\n          <tbody>\n            '.concat(n,"\n          </tbody>\n        </table>\n        ");document.getElementById("tableDetailTransaction").innerHTML=r,$("#detailTransactionModal").modal("show")},formatDate:function(t){return l.a.locale("id"),l()(t).format("dddd, DD MMMM YYYY - HH:mm")},formatCurrency:function(t){return t?new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0,maximumFractionDigits:0}).format(t):"Rp 0"}}},"head",(function(){return{title:"Transaction - Mirae Apps",script:[{src:"/admin/js/dashboard.js",body:!0},{src:"/admin/js/Chart.roundedBarCharts.js",body:!0}],link:[{rel:"stylesheet",href:"/admin/vendors/datatables.net-bs4/dataTables.bootstrap4.css"},{rel:"stylesheet",href:"/admin/vendors/ti-icons/css/themify-icons.css"},{rel:"stylesheet",type:"text/css",href:"/admin/js/select.dataTables.min.css"}]}})),"components",{})),h=d,m=e(77),component=Object(m.a)(h,(function(){var t=this,n=t._self._c;return n("div",[n("div",{staticClass:"card"},[n("div",{staticClass:"card-body"},[n("h2",{staticClass:"card-title pb-4"},[t._v("Tabel Transaksi")]),t._v(" "),n("div",{staticClass:"row bg-white"},[n("div",{staticClass:"col-md-6"},[n("NuxtLink",{staticClass:"btn btn-success btn-icon-text mb-3",attrs:{to:{name:"admin-transaction-create"}}},[n("i",{staticClass:"mdi mdi-plus"}),t._v(" "),n("span",{staticClass:"menu-title"},[t._v("Tambah Data")])])],1),t._v(" "),n("div",{staticClass:"col-md-6"},[n("div",{staticClass:"form-group"},[n("div",{staticClass:"input-group"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.search,expression:"search"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Search data"},domProps:{value:t.search},on:{keypress:function(n){return!n.type.indexOf("key")&&t._k(n.keyCode,"enter",13,n.key,"Enter")?null:t.searchData.apply(null,arguments)},input:function(n){n.target.composing||(t.search=n.target.value)}}}),t._v(" "),n("div",{staticClass:"input-group-append"},[n("button",{staticClass:"btn btn-sm btn-success",attrs:{type:"button"},on:{click:t.searchData}},[n("i",{staticClass:"icon icon-search"})])])])])])]),t._v(" "),n("div",{staticClass:"table-responsive"},[n("table",{staticClass:"table table-hover table-bordered"},[t._m(0),t._v(" "),t.isLoading.getTransaction?t._e():n("tbody",t._l(t.transactions,(function(e,r){return n("tr",{key:r},[n("td",{staticClass:"text-center"},[t._v(t._s(r+1))]),t._v(" "),n("td",[t._v(t._s(t.formatDate(e.created_at)))]),t._v(" "),n("td",[t._v(" "+t._s(e.code_transaction?e.code_transaction:"")+" ")]),t._v(" "),n("td",[t._v(" "+t._s(e.customer_name?e.customer_name:"")+" ")]),t._v(" "),n("td",[t._v(" "+t._s(t._f("currencyRupiah")(e.total_price))+" ")]),t._v(" "),n("td",[t._v(" "+t._s(e.payment_method?e.payment_method:"")+" ")]),t._v(" "),n("td",[t._v(" "+t._s(t._f("currencyRupiah")(e.total_payment))+" ")]),t._v(" "),n("td",[t._v(" "+t._s(t._f("currencyRupiah")(e.money_changes))+" ")]),t._v(" "),n("td",{staticClass:"text-center"},[n("button",{staticClass:"btn btn-sm btn-primary btn-icon-text",attrs:{type:"button"},on:{click:function(n){return t.printInvoince(e)}}},[n("i",{staticClass:"mdi mdi-printer"}),t._v("\n                  Cetak\n                ")]),t._v(" "),n("button",{staticClass:"btn btn-sm btn-info btn-icon-text",attrs:{type:"button","data-toggle":"modal"},on:{click:function(n){return t.showModalDetailTransaction(e)}}},[n("i",{staticClass:"mdi mdi-file-document-box"}),t._v("\n                  Detail\n                ")])])])})),0),t._v(" "),t.isLoading.getTransaction?n("tbody",t._l(5,(function(e){return n("tr",{key:e},[n("td",{staticClass:"text-center"},[n("simple-shimmer",{style:{height:"25px",width:"100%",borderRadius:"2px"}})],1),t._v(" "),n("td",[n("simple-shimmer",{style:{height:"25px",width:"100%",borderRadius:"2px"}})],1),t._v(" "),n("td",[n("simple-shimmer",{style:{height:"25px",width:"100%",borderRadius:"2px"}})],1),t._v(" "),n("td",[n("simple-shimmer",{style:{height:"25px",width:"100%",borderRadius:"2px"}})],1),t._v(" "),n("td",[n("simple-shimmer",{style:{height:"25px",width:"100%",borderRadius:"2px"}})],1),t._v(" "),n("td",[n("simple-shimmer",{style:{height:"25px",width:"100%",borderRadius:"2px"}})],1),t._v(" "),n("td",[n("simple-shimmer",{style:{height:"25px",width:"100%",borderRadius:"2px"}})],1),t._v(" "),n("td",[n("simple-shimmer",{style:{height:"25px",width:"100%",borderRadius:"2px"}})],1),t._v(" "),n("td",{staticClass:"text-center"},[n("simple-shimmer",{style:{height:"25px",width:"100%",borderRadius:"2px"}})],1)])})),0):t._e()])]),t._v(" "),n("div",{staticClass:"d-flex justify-content-end"},[n("vs-pagination",{attrs:{"current-page":t.pagination.currentPage,"total-pages":t.pagination.totalPage},on:{change:t.changePage}})],1),t._v(" "),n("div",{staticClass:"modal fade",attrs:{id:"detailTransactionModal",tabindex:"-1","aria-labelledby":"myLargeModalLabel","aria-hidden":"true"}},[n("div",{staticClass:"modal-dialog modal-lg"},[n("div",{staticClass:"modal-content"},[t._m(1),t._v(" "),n("div",{staticClass:"modal-body"},[n("div",{ref:"tableModalDetailTransaksi",staticClass:"table-responsive",attrs:{id:"tableModalDetailTransaksi"}},[n("table",{staticClass:"table table-hover table-bordered",attrs:{id:"tableDetailTransaction"}})])]),t._v(" "),t._m(2)])])])])])])}),[function(){var t=this,n=t._self._c;return n("thead",[n("tr",{staticClass:"text-center"},[n("th",[t._v("No")]),t._v(" "),n("th",[t._v("Tanggal")]),t._v(" "),n("th",[t._v("Kode Transaksi")]),t._v(" "),n("th",[t._v("Nama Pelanggan")]),t._v(" "),n("th",[t._v("Total Harga")]),t._v(" "),n("th",[t._v("Metode Pembayaran")]),t._v(" "),n("th",[t._v("Jumlah Bayar")]),t._v(" "),n("th",[t._v("Kembalian")]),t._v(" "),n("th",[t._v("Action")])])])},function(){var t=this,n=t._self._c;return n("div",{staticClass:"modal-header"},[n("h5",{staticClass:"modal-title",attrs:{id:"titleLabelDetailTransactionModal"}},[t._v("\n                DETAIL TRANSAKSI\n              ")]),t._v(" "),n("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[n("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])])},function(){var t=this._self._c;return t("div",{staticClass:"modal-footer"},[t("button",{staticClass:"btn btn-danger",attrs:{type:"button","data-dismiss":"modal"}},[this._v("\n                Close\n              ")])])}],!1,null,null,null);n.default=component.exports}}]);