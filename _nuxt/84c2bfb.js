(window.webpackJsonp=window.webpackJsonp||[]).push([[42],{891:function(e,t,o){var content=o(919);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,o(166).default)("0dadb1e5",content,!0,{sourceMap:!1})},917:function(e,t,o){"use strict";var r=o(36),n=o(521).values;r({target:"Object",stat:!0},{values:function(e){return n(e)}})},918:function(e,t,o){"use strict";o(891)},919:function(e,t,o){var r=o(165)((function(i){return i[1]}));r.push([e.i,".ck-editor__editable{min-height:400px}.dropdown-menu{max-height:200px;overflow-y:auto}.dropdown-item{align-items:center;cursor:pointer;display:flex;height:45px;padding:0 10px}.show{display:block}",""]),r.locals={},e.exports=r},970:function(e,t,o){"use strict";o.r(t);o(64);var r=o(80),n=(o(211),o(10),o(185),o(374),o(8),o(917),o(39),o(250),o(119),o(373),o(11),o(124),o(98),{layout:"admin/main",head:function(){return{title:"Tambah Transaksi - Mirae Apps",script:[{src:"/admin/vendors/typeahead.js/typeahead.bundle.min.js",body:!0},{src:"/admin/vendors/select2/select2.min.js",body:!0},{src:"/admin/js/file-upload.js",body:!0},{src:"/admin/js/typeahead.js",body:!0},{src:"/admin/js/select2.js",body:!0}],link:[{rel:"stylesheet",href:"/admin/vendors/select2/select2.min.css"},{rel:"stylesheet",href:"/admin/vendors/select2-bootstrap-theme/select2-bootstrap.min.css"}]}},components:{"ckeditor-nuxt":function(){return o.e(0).then(o.t.bind(null,941,7))}},data:function(){return{searchItemProduct:"",searchFilteredItemProducts:[],isLoading:{fetchDataProducts:!0,fetchDataCustomers:!0,fetchDataVehicles:!0,fetchDataPaymentMethods:!0,fetchDataEmployees:!0},filteredDataCustomers:[],filteredDataVehicles:[],formVehicleData:{isVisible:!1,vehicles:[]},formCustomerData:{id:null,name:"",phoneNumber:""},products:[],customers:[],vehicles:[],paymentMethods:[],optionPaymentMethods:[],employees:[],customerVehicles:[],selectedProducts:{grand_total:0,payment_method_id:0,payment_method:"",total_payment:0,money_changes:"",products:[]},transaction:{id:null,code_transaction:"",grand_total:0,payment_method:"",total_payment:0,money_changes:"",customer:{id:null,name:"",phoneNumber:""}},validation:[]}},mounted:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return document.addEventListener("click",e.handleClickOutside.bind(e)),e.fetchDataProducts(),e.fetchDataCustomers(),e.fetchDataVehicles(),e.fetchDataPaymentMethods(),e.fetchDataEmployees(),t.next=8,e.generateCodeTransaction();case 8:e.transaction.code_transaction=t.sent;case 9:case"end":return t.stop()}}),t)})))()},beforeDestroy:function(){document.removeEventListener("click",this.handleClickOutside.bind(this))},methods:{fetchDataProducts:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){var o,data;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.isLoading.fetchDataProducts=!0,console.log("Fetching Data Products"),t.prev=2,t.next=5,fetch("https://script.google.com/macros/s/AKfycbyGOMw-RJt2ag4-W5hbleOQsUDOXOmczeIn_O84qz2z_5xoxfYvrT0j9EvFu-Vv46nc/exec?service=product&method=get&path=read&search=&page=1&length=1000000&sortedBy=asc",{method:"GET"});case 5:if((o=t.sent).ok){t.next=8;break}throw new Error("Network response was not ok");case 8:return t.next=10,o.json();case 10:if(200==(data=t.sent).code){t.next=13;break}throw new Error("".concat(data.message));case 13:e.products=data.data.products,console.log("PRINT DATA PRODUCT"),console.log(e.products),t.next=22;break;case 18:t.prev=18,t.t0=t.catch(2),console.error("Error:",t.t0),e.$swal.fire({title:"Error",text:"Terjadi Kesalahan Pada Sistem! ".concat(t.t0.message),icon:"error"});case 22:e.isLoading.fetchDataProducts=!1;case 23:case"end":return t.stop()}}),t,null,[[2,18]])})))()},fetchDataCustomers:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){var o,data;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.isLoading.fetchDataCustomers=!0,console.log("Fetching Data Customers"),t.prev=2,t.next=5,fetch("https://script.google.com/macros/s/AKfycbyGOMw-RJt2ag4-W5hbleOQsUDOXOmczeIn_O84qz2z_5xoxfYvrT0j9EvFu-Vv46nc/exec?service=customer&method=get&path=read&search=&page=1&length=1000000&sortedBy=asc",{method:"GET"});case 5:if((o=t.sent).ok){t.next=8;break}throw new Error("Network response was not ok");case 8:return t.next=10,o.json();case 10:if(200==(data=t.sent).code){t.next=13;break}throw new Error("".concat(data.message));case 13:e.customers=data.data.customers,e.filteredDataCustomers=e.customers,console.log("PRINT DATA CUSTOMER"),console.log(e.customers),t.next=23;break;case 19:t.prev=19,t.t0=t.catch(2),console.error("Error:",t.t0),e.$swal.fire({title:"Error",text:"Terjadi Kesalahan Pada Sistem! ".concat(t.t0.message),icon:"error"});case 23:e.isLoading.fetchDataCustomers=!1;case 24:case"end":return t.stop()}}),t,null,[[2,19]])})))()},fetchDataVehicles:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){var o,data;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.isLoading.fetchDataVehicles=!0,console.log("Fetching Data Vehicles"),t.prev=2,t.next=5,fetch("https://script.google.com/macros/s/AKfycbyGOMw-RJt2ag4-W5hbleOQsUDOXOmczeIn_O84qz2z_5xoxfYvrT0j9EvFu-Vv46nc/exec?service=vehicle&method=get&path=read&search=&page=1&length=1000000&sortedBy=asc",{method:"GET"});case 5:if((o=t.sent).ok){t.next=8;break}throw new Error("Network response was not ok");case 8:return t.next=10,o.json();case 10:if(200==(data=t.sent).code){t.next=13;break}throw new Error("".concat(data.message));case 13:e.vehicles=data.data.vehicles,e.filteredDataVehicles=e.vehicles,console.log("PRINT DATA VEHICLES"),console.log(e.vehicles),t.next=23;break;case 19:t.prev=19,t.t0=t.catch(2),console.error("Error:",t.t0),e.$swal.fire({title:"Error",text:"Terjadi Kesalahan Pada Sistem! ".concat(t.t0.message),icon:"error"});case 23:e.isLoading.fetchDataVehicles=!1;case 24:case"end":return t.stop()}}),t,null,[[2,19]])})))()},fetchDataPaymentMethods:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){var o,data;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.isLoading.fetchDataPaymentMethods=!0,console.log("Fetching Data Payment Methods"),t.prev=2,t.next=5,fetch("https://script.google.com/macros/s/AKfycbyGOMw-RJt2ag4-W5hbleOQsUDOXOmczeIn_O84qz2z_5xoxfYvrT0j9EvFu-Vv46nc/exec?service=payment_method&method=get&path=read&search=&page=1&length=1000000&sortedBy=asc",{method:"GET"});case 5:if((o=t.sent).ok){t.next=8;break}throw new Error("Network response was not ok");case 8:return t.next=10,o.json();case 10:if(200==(data=t.sent).code){t.next=13;break}throw new Error("".concat(data.message));case 13:e.paymentMethods=data.data.paymentMethods,e.optionPaymentMethods=[],e.paymentMethods.forEach((function(t){e.optionPaymentMethods.push({value:t.id,text:t.name})})),console.log("PRINT DATA PAYMENT METHODS"),console.log(e.paymentMethods),t.next=24;break;case 20:t.prev=20,t.t0=t.catch(2),console.error("Error:",t.t0),e.$swal.fire({title:"Error",text:"Terjadi Kesalahan Pada Sistem! ".concat(t.t0.message),icon:"error"});case 24:e.isLoading.fetchDataPaymentMethods=!1;case 25:case"end":return t.stop()}}),t,null,[[2,20]])})))()},fetchDataEmployees:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){var o,data;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.isLoading.fetchDataEmployees=!0,console.log("Fetching Data Employees"),t.prev=2,t.next=5,fetch("https://script.google.com/macros/s/AKfycbyGOMw-RJt2ag4-W5hbleOQsUDOXOmczeIn_O84qz2z_5xoxfYvrT0j9EvFu-Vv46nc/exec?service=employee&method=get&path=read&search=&page=1&length=1000000&sortedBy=asc",{method:"GET"});case 5:if((o=t.sent).ok){t.next=8;break}throw new Error("Network response was not ok");case 8:return t.next=10,o.json();case 10:if(200==(data=t.sent).code){t.next=13;break}throw new Error("".concat(data.message));case 13:e.employees=data.data.employees,console.log("PRINT DATA EMPLOYEES"),console.log(e.employees),t.next=22;break;case 18:t.prev=18,t.t0=t.catch(2),console.error("Error:",t.t0),e.$swal.fire({title:"Error",text:"Terjadi Kesalahan Pada Sistem! ".concat(t.t0.message),icon:"error"});case 22:e.isLoading.fetchDataEmployees=!1;case 23:case"end":return t.stop()}}),t,null,[[2,18]])})))()},generateCodeTransaction:function(){return Object(r.a)(regeneratorRuntime.mark((function e(){var t,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Date.now(),o="TRX-".concat(t),console.log(o),e.abrupt("return",o);case 4:case"end":return e.stop()}}),e)})))()},handleFileChange:function(e){(this.post.image=e.target.files[0]).type.match("image.*")||(e.target.value="",this.post.image=null,this.$swal.fire({title:"OOPS!",text:"Format File Tidak Didukung!",icon:"error",showConfirmButton:!1,timer:2e3}))},searchItemProductsMethod:function(e){var t=e.target.value,o=this.products.filter((function(e){return e.name.toLowerCase().includes(t.toLowerCase())}));console.log(t),console.log(o),this.searchFilteredItemProducts=o},showModalProduct:function(){$("#choiceProductModal").modal("show")},actionChoiceProduct:function(e){var t=this;console.log(e),e.quantity=1,e.total_price=parseInt(e.price)*parseInt(e.quantity||1),this.selectedProducts.products.push(e),this.selectedProducts.grand_total=0,this.selectedProducts.products.forEach((function(e){t.selectedProducts.grand_total+=parseInt(e.total_price)})),this.checkIsVisibleFormVehicle(),this.searchItemProduct="",$("#choiceProductModal").modal("hide")},inputQtyChange:function(e,t,o){var r=this;t.total_price=t.price*e.target.value,this.selectedProducts.grand_total=0,this.selectedProducts.products.forEach((function(e){console.log("FOREACH"),console.log(e.total_price),r.selectedProducts.grand_total+=parseInt(e.total_price)})),this.checkIsVisibleFormVehicle()},deleteSelectedProduct:function(e){var t=this,o=this.selectedProducts.products.indexOf(e);this.selectedProducts.products.splice(o,1),this.selectedProducts.grand_total=0,this.selectedProducts.products.forEach((function(e){t.selectedProducts.grand_total+=parseInt(e.total_price)})),this.checkIsVisibleFormVehicle()},checkIsVisibleFormVehicle:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.formVehicleData.isVisible=!1,e.selectedProducts.products.forEach((function(t){1!=t.id&&2!=t.id&&3!=t.id&&4!=t.id&&5!=t.id||(e.formVehicleData.isVisible=!0)})),e.countTotalVehicle();case 3:case"end":return t.stop()}}),t)})))()},countTotalVehicle:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.formVehicleData.vehicles=[],e.selectedProducts.products.forEach((function(t){if(1==t.id||2==t.id||3==t.id||4==t.id||5==t.id){for(var o=[],i=0;i<t.quantity;i++){var r={id:null,product_id:t.id,type:1==t.id?"Motor":"Mobil"};o.push(r),e.formVehicleData.vehicles.push(r)}t.vehicles=o}})),console.log("PRINT DATA VEHICLES"),console.log(e.formVehicleData.vehicles),console.log("TOTAL VEHICLES"),console.log(e.formVehicleData.vehicles.length);case 6:case"end":return t.stop()}}),t)})))()},filterDataCustomer:function(e,t){var input=e.target.value.toLowerCase();this.filteredDataCustomers=this.customers.filter((function(e){return Object.values(e).some((function(e){return String(e).toLowerCase().includes(input)}))})),this.onInputNameCustomer(e,t)},filterDataVehicle:function(e,t,o){var input=e.target.value.toLowerCase();this.filteredDataVehicles=this.vehicles.filter((function(e){return Object.values(e).some((function(e){return String(e).toLowerCase().includes(input)}))})),this.onInputNameVehicle(e,t,o)},onInputNameVehicle:function(e,t,o){console.log("ON INPUT NAME VEHICLE --- IS TYPING "),t.manualInputDataVehicle=!0},onInputPlateNumberVehicle:function(e,t,o){console.log("ON INPUT PLATE NUMBER VEHICLE --- IS TYPING ");var r=e.target.value,n=t.value_plate_number_selected_item;t.manualInputDataVehicle=r!=n},onInputNameCustomer:function(e,t){console.log("ON INPUT CUSTOMER NAME --- IS TYPING "),t.manualInputDataCustomer=!0},onInputPhoneNumberCustomer:function(e,t,o){console.log("ON INPUT CUSTOMER NAME --- IS TYPING ");var r=e.target.value,n=t.value_phone_number_selected_item;t.manualInputDataCustomer=r!=n},selectItemCustomer:function(e,t,o){console.log("SELECT ITEM CUSTOMER"),console.log(o),t.id=o.id,t.name=o.name,t.phoneNumber=o.phone_number,t.value_phone_number_selected_item=o.phone_number,t.manualInputDataCustomer=!1,t.showCustomerNameDropdown=!1},selectItemVehicle:function(e,t,o){console.log("SELECT ITEM VEHICLE"),t.id=o.id,t.name=o.name,t.type=o.type,t.plate_number=o.plate_number,t.value_plate_number_selected_item=o.plate_number,t.manualInputDataVehicle=!1,t.showVehicleNameDropdown=!1,this.$forceUpdate()},handleClickOutside:function(e){},onFocusHandleInputVehicle:function(e,t){t.showVehicleNameDropdown=!0,this.$forceUpdate()},onBlurHandleInputVehicle:function(e,t){var o=this;setTimeout((function(){t.showVehicleNameDropdown=!1,o.$forceUpdate()}),100)},onFocusHandleInputCustomer:function(e){e.showCustomerNameDropdown=!0,this.$forceUpdate()},onBlurHandleInputCustomer:function(e){var t=this;setTimeout((function(){e.showCustomerNameDropdown=!1,t.$forceUpdate()}),100)},preventBlur:function(e){e.preventDefault()},onInputTotalPayment:function(e){var t=e;this.selectedProducts.money_changes=t-this.selectedProducts.grand_total},onCheckEmployees:function(e,t,o){console.log("EVENT"),console.log(e.target.checked),console.log("NAME"),console.log(t),e.target.checked?null==o.employees||null==o.employees?(o.employees=[],console.log("INITIALIZE AND PUSH EMPLOYEES"),o.employees.push(t)):(console.log("PUSH EMPLOYEES"),o.employees.push(t)):o.employees.splice(o.employees.indexOf(t),1)},validateDataFormTransaction:function(){console.log("VALIDATE FORM TRANSACTION"),console.log(this.formTransaction);var e={isValid:!1,message:"",data:null},t={id:this.formCustomerData.manualInputDataCustomer?null:this.formCustomerData.id,name:this.formCustomerData.name,phone_number:this.formCustomerData.phoneNumber};if(console.log("NEW CUSTOMER"),console.log(t),""==t.name||""==t.phone_number)return e.isValid=!1,e.message="Data pelanggan nama dan nomor telepon harus diisi!",e;var o=[];if(this.selectedProducts.products.forEach((function(e){console.log("FOREACH"),console.log(e),null==e.vehicles&&null==e.vehicles||e.vehicles.forEach((function(e){e.id=e.manualInputDataVehicle?null:e.id}));var t={transaction_id:null,product_id:e.id,product_code:e.code,product_name:e.name,product_type:e.type,customer_vehicle_id:null,quantity:e.quantity,price:e.price,total_price:e.total_price,employees:e.employees,vehicles:e.vehicles};o.push(t)})),console.log("NEW DETAIL TRANSACTION"),console.log(o),0==o.length)return e.isValid=!1,e.message="Data produk harus diisi!",e;var r={id:null,code_transaction:this.transaction.code_transaction,customer_id:t.id,grand_total:this.selectedProducts.grand_total,payment_method_id:this.selectedProducts.payment_method_id,total_payment:this.selectedProducts.total_payment,money_changes:this.selectedProducts.money_changes};if(console.log("NEW TRANSACTION"),console.log(r),0==r.total_payment)return e.isValid=!1,e.message="Total bayar harus diisi!",e;if(r.money_changes<0)return e.isValid=!1,e.message="Total bayar tidak boleh kurang dari harga total!",e;if(0==r.payment_method_id||null==r.payment_method_id)return e.isValid=!1,e.message="Metode pembayaran harus diisi!",e;var n=[];this.formVehicleData.vehicles.forEach((function(e){console.log("FOREACH"),console.log(e);var t={id:e.manualInputDataVehicle?null:e.id,name:e.name,type:e.type,plate_number:e.plate_number};n.push(t)})),console.log("NEW VEHICLES"),console.log(n);for(var i=0;i<n.length;i++)if(0!=n.length&&(null==n[i].name||""==n[i].name||null==n[i].plate_number||""==n[i].plate_number))return e.isValid=!1,e.message="Setiap data kendaraan nama dan plat nomor harus diisi!",e;for(var c=0;c<o.length;c++)if("jasa"==o[c].product_type&&(null==o[c].employees||""==o[c].employees))return e.isValid=!1,e.message="Data petugas karyawan harus diisi di setiap layanan jasa produk!",e;var l={path:"create",method:"post",service:"steam_transaction",customer:t,transaction:r,detail_transactions:o};return console.log("PAYLOAD RAW"),console.log(l),e.isValid=!0,e.message="Form transaksi valid",e.data=l,e},actionCreateTransaction:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){var o,r,n,data;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(console.log("ACTION CREATE TRANSACTION"),o=e.validateDataFormTransaction(),console.log("VALIDATE DATA FORM TRANSACTION"),console.log(o),o.isValid){t.next=7;break}return e.$swal.fire({title:"Form Transaksi Tidak Valid",text:"".concat(o.message),icon:"warning",showCancelButton:!1,confirmButtonColor:"#3085d6",confirmButtonText:"Oke"}).then((function(e){})),t.abrupt("return");case 7:return e.$swal.fire({title:"Menambahkan Data Transaksi!",timerProgressBar:!0,text:"Please wait...",didOpen:function(){e.$swal.showLoading()},willClose:function(){}}).then((function(e){})),console.log("PAYLOAD"),console.log(o.data),r=o.data,t.prev=11,t.next=14,fetch("https://script.google.com/macros/s/AKfycbyGOMw-RJt2ag4-W5hbleOQsUDOXOmczeIn_O84qz2z_5xoxfYvrT0j9EvFu-Vv46nc/exec",{method:"POST",body:JSON.stringify(r)});case 14:if((n=t.sent).ok){t.next=17;break}throw new Error("Network response was not ok");case 17:return t.next=19,n.json();case 19:if(200==(data=t.sent).code){t.next=22;break}throw new Error("".concat(data.message));case 22:e.$router.push({name:"admin-transaction"}),e.$swal.fire({title:"BERHASIL!",text:"Data Transaksi Berhasil Disimpan!",icon:"success",showConfirmButton:!1,timer:2e3}),t.next=30;break;case 26:t.prev=26,t.t0=t.catch(11),console.error("Error:",t.t0),e.$swal.fire({title:"Error",text:"Terjadi Kesalahan Pada Sistem! ".concat(t.t0.message),icon:"error"});case 30:case"end":return t.stop()}}),t,null,[[11,26]])})))()}},watch:{},computed:{}}),c=(o(918),o(77)),component=Object(c.a)(n,(function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"card"},[t("div",{staticClass:"card-body"},[t("h4",{staticClass:"card-title"},[e._v("Tambah Data Transaksi")]),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-md-12"},[t("div",{staticClass:"form-group"},[t("label",{attrs:{for:"exampleInputName1"}},[e._v("Kode Transaksi")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.transaction.code_transaction,expression:"transaction.code_transaction"}],staticClass:"form-control",attrs:{type:"text",id:"kodeTransaksi",placeholder:"Kode Transaksi",disabled:""},domProps:{value:e.transaction.code_transaction},on:{input:function(t){t.target.composing||e.$set(e.transaction,"code_transaction",t.target.value)}}}),e._v(" "),e.validation.code_transaction?t("div",{staticClass:"mt-3"},[t("vs-alert",{attrs:{variant:"error"}},[e._v(" "+e._s(e.validation.title[0])+" ")])],1):e._e()]),e._v(" "),t("div",{staticClass:"card border-primary"},[t("h6",{},[e._v("Isi Data Pelanggan")]),e._v(" "),t("div",{staticClass:"form-group"},[t("label",[e._v("Nama Pelanggan")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.formCustomerData.name,expression:"formCustomerData.name"}],ref:"customerNameInput",staticClass:"form-control",attrs:{type:"text",placeholder:"Masukan Nama Pelanggan"},domProps:{value:e.formCustomerData.name},on:{focus:function(t){return e.onFocusHandleInputCustomer(e.formCustomerData)},blur:function(t){return e.onBlurHandleInputCustomer(e.formCustomerData)},input:[function(t){t.target.composing||e.$set(e.formCustomerData,"name",t.target.value)},function(t){return e.filterDataCustomer(t,e.formCustomerData)}]}}),e._v(" "),e.formCustomerData.showCustomerNameDropdown?t("div",{staticClass:"dropdown"},[t("div",{ref:"dropdownMenuDataCustomer",staticClass:"dropdown-menu w-100",class:{show:e.filteredDataCustomers.length>0},on:{mousedown:e.preventBlur}},e._l(e.filteredDataCustomers,(function(o,r){return t("a",{key:r,staticClass:"dropdown-item",attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.selectItemCustomer(r,e.formCustomerData,o)}}},[e._v("\n                    "+e._s(o.name+" - "+o.phone_number)+"\n                  ")])})),0)]):e._e()]),e._v(" "),t("div",{staticClass:"form-group"},[t("label",[e._v("No Telepon Pelanggan")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.formCustomerData.phoneNumber,expression:"formCustomerData.phoneNumber"}],staticClass:"form-control",attrs:{type:"number",placeholder:"Masukan No Telepon Pelanggan"},domProps:{value:e.formCustomerData.phoneNumber},on:{input:[function(t){t.target.composing||e.$set(e.formCustomerData,"phoneNumber",t.target.value)},function(t){return e.onInputPhoneNumberCustomer(t,e.formCustomerData)}]}})])]),e._v(" "),t("div",{staticClass:"row ml-1 mb-3"},[t("button",{staticClass:"btn btn-sm btn-info btn-icon-text",attrs:{type:"button","data-toggle":"modal"},on:{click:e.showModalProduct}},[t("i",{staticClass:"mdi mdi-file-document-box"}),e._v("\n              Pilih Produk\n            ")])]),e._v(" "),t("div",{staticClass:"table-responsive"},[t("table",{staticClass:"table table-hover table-bordered mb-2"},[e._m(0),e._v(" "),t("tbody",[e._l(e.selectedProducts.products,(function(o,r){return t("tr",{key:r},[t("td",{staticClass:"text-center"},[e._v(e._s(r+1))]),e._v(" "),t("td",{staticClass:"text-center"},[e._v(e._s(o.name))]),e._v(" "),t("td",{staticClass:"text-center"},[e._v(e._s(e._f("currencyRupiah")(o.price)))]),e._v(" "),t("td",{staticClass:"text-center"},[t("input",{directives:[{name:"model",rawName:"v-model.number",value:o.quantity,expression:"product.quantity",modifiers:{number:!0}}],staticClass:"form-control",staticStyle:{"min-width":"100px"},attrs:{type:"number",id:"exampleInputName1",placeholder:"Quantity"},domProps:{value:o.quantity},on:{input:[function(t){t.target.composing||e.$set(o,"quantity",e._n(t.target.value))},function(t){return e.inputQtyChange(t,o,r)}],blur:function(t){return e.$forceUpdate()}}})]),e._v(" "),t("td",{staticClass:"text-center"},[e._v(e._s(e._f("currencyRupiah")(o.total_price)))]),e._v(" "),t("td",{staticClass:"text-center"},[t("button",{staticClass:"btn btn-sm btn-danger btn-icon-text",attrs:{type:"button","data-toggle":"modal"},on:{click:function(t){return e.deleteSelectedProduct(o)}}},[e._m(1,!0)])])])})),e._v(" "),e.selectedProducts.products.length?t("tr",[t("td",{staticClass:"text-right",attrs:{colspan:"5"}},[e._v("\n                    Grand Total :\n                  ")]),e._v(" "),t("td",{staticClass:"text-left",attrs:{colspan:"2"}},[e._v("\n                    "+e._s(e._f("currencyRupiah")(e.selectedProducts.grand_total))+"\n                  ")])]):e._e(),e._v(" "),e.selectedProducts.products.length?t("tr",[t("td",{staticClass:"text-right",attrs:{colspan:"5"}},[e._v("\n                    Total Bayar :\n                  ")]),e._v(" "),t("td",{staticClass:"text-left",attrs:{colspan:"2"}},[t("input",{directives:[{name:"model",rawName:"v-model.number",value:e.selectedProducts.total_payment,expression:"selectedProducts.total_payment",modifiers:{number:!0}}],staticClass:"form-control",staticStyle:{"min-width":"100px"},attrs:{type:"number",id:"exampleInputName1",placeholder:"Total Bayar"},domProps:{value:e.selectedProducts.total_payment},on:{input:[function(t){t.target.composing||e.$set(e.selectedProducts,"total_payment",e._n(t.target.value))},function(t){return e.onInputTotalPayment(t.target.value)}],blur:function(t){return e.$forceUpdate()}}}),e._v(" "),t("button",{staticClass:"btn btn-sm btn-warning btn-icon-text mt-3",attrs:{type:"button"},on:{click:function(t){return e.onInputTotalPayment(e.selectedProducts.total_payment=e.selectedProducts.grand_total)}}},[e._m(2)])])]):e._e(),e._v(" "),e.selectedProducts.products.length?t("tr",[t("td",{staticClass:"text-right",attrs:{colspan:"5"}},[e._v("\n                    Kembalian :\n                  ")]),e._v(" "),t("td",{staticClass:"text-left",attrs:{colspan:"2"}},[e._v("\n                    "+e._s(e._f("currencyRupiah")(e.selectedProducts.money_changes))+"\n                  ")])]):e._e(),e._v(" "),e.selectedProducts.products.length?t("tr",[t("td",{staticClass:"text-right",attrs:{colspan:"5"}},[e._v("\n                    Metode Pembayaran :\n                  ")]),e._v(" "),t("td",{staticClass:"text-left",attrs:{colspan:"2"}},[t("b-form-select",{staticStyle:{"min-width":"100px"},attrs:{id:"input-3",options:e.optionPaymentMethods,required:""},model:{value:e.selectedProducts.payment_method_id,callback:function(t){e.$set(e.selectedProducts,"payment_method_id",e._n(t))},expression:"selectedProducts.payment_method_id"}})],1)]):e._e(),e._v(" "),e.selectedProducts.products.length?e._e():t("tr",[t("td",{staticClass:"text-center",attrs:{colspan:"7"}},[e._v("Belum ada produk yang di pilih!")])])],2)])]),e._v(" "),e.formVehicleData.isVisible?t("div",{staticClass:"col-md-12 grid-margin stretch-card mt-5"},[t("div",{staticClass:"card"},[t("h6",[e._v("Isi Data Kendaraan")]),e._v(" "),t("div",{staticClass:"row"},e._l(e.formVehicleData.vehicles,(function(o,r){return t("div",{key:r,staticClass:"col-md-6",class:r>1?"mt-5":""},[t("p",{staticClass:"card-description"},[e._v(" #Isi Data Kendaraan Ke "+e._s(r+1)+" : "+e._s("motor"===o.type.toLowerCase()?"Motor":"Mobil")+" ")]),e._v(" "),t("form",{staticClass:"forms-sample"},[t("div",{staticClass:"form-group"},[t("label",{attrs:{for:"exampleInputUsername1"}},[e._v("Nama Kendaraan")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:o.name,expression:"vehicleForm.name"}],ref:"VehicleNameInputKe0",refInFor:!0,staticClass:"form-control",attrs:{type:"text",placeholder:"Masukan Nama Kendaraan Ke "+(r+1)},domProps:{value:o.name},on:{focus:function(t){return e.onFocusHandleInputVehicle(r,o)},blur:function(t){return e.onBlurHandleInputVehicle(r,o)},input:[function(t){t.target.composing||e.$set(o,"name",t.target.value)},function(t){return e.filterDataVehicle(t,o,r)}]}}),e._v(" "),o.showVehicleNameDropdown?t("div",{staticClass:"dropdown"},[t("div",{ref:"VehicleNameDropdownKe0",refInFor:!0,staticClass:"dropdown-menu w-100",class:{show:e.filteredDataVehicles.length>0},on:{mousedown:e.preventBlur}},e._l(e.filteredDataVehicles,(function(n){return t("a",{key:n.id,staticClass:"dropdown-item",attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.selectItemVehicle(r,o,n)}}},[e._v(e._s(n.name+" - "+n.type+" - "+n.plate_number))])})),0)]):e._e()]),e._v(" "),t("div",{staticClass:"form-group"},[t("label",{attrs:{for:"exampleInputPassword1"}},[e._v("Tipe Kendaraan")]),e._v(" "),t("v-select",{attrs:{options:["Motor Kecil","Motor Besar","Mobil","Mobil Standard","Mobil Besar","Angkot"]},model:{value:o.type,callback:function(t){e.$set(o,"type",t)},expression:"vehicleForm.type"}})],1),e._v(" "),t("div",{staticClass:"form-group"},[t("label",{attrs:{for:"exampleInputPassword1"}},[e._v("Plat Nomor Kendaraan")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:o.plate_number,expression:"vehicleForm.plate_number"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Masukan Plat Nomor Kendaraan"+(r+1)},domProps:{value:o.plate_number},on:{input:[function(t){t.target.composing||e.$set(o,"plate_number",t.target.value)},function(t){return e.onInputPlateNumberVehicle(t,o,r)}]}})])])])})),0)])]):e._e(),e._v(" "),e.selectedProducts.products.length>0?t("div",{staticClass:"col-md-6"},e._l(e.selectedProducts.products,(function(o,r){return t("div",{key:r},["jasa"===o.type.toLowerCase()?t("div",[t("h6",{staticClass:"mt-3"},[e._v("Pilih Petugas Untuk Layanan "),t("br"),e._v(" ("+e._s(o.code+" - "+o.name)+") :\n                ")]),e._v(" "),t("div",{staticClass:"col-md-6"},[t("div",{staticClass:"form-group"},e._l(e.employees,(function(r,n){return t("div",{key:n,staticClass:"form-check"},[t("label",{staticClass:"form-check-label"},[t("input",{staticClass:"form-check-input",attrs:{type:"checkbox"},on:{change:function(t){return e.onCheckEmployees(t,r.name,o)}}}),e._v("\n                        "+e._s(r.name)+" "),t("i",{staticClass:"input-helper"})])])})),0)])]):e._e()])})),0):e._e()])]),e._v(" "),t("div",{staticClass:"row mt-5"},[t("div",{staticClass:"col-md-12"},[t("button",{staticClass:"btn btn-success mr-2 w-100",attrs:{type:"submit"},on:{click:function(t){return e.actionCreateTransaction()}}},[t("b",[e._v("Simpan\n              Transaksi")])]),e._v(" "),t("NuxtLink",{staticClass:"btn btn-secondary mt-3 w-100",attrs:{to:{name:"admin-transaction"}}},[e._v("\n            Batal\n          ")])],1)])])]),e._v(" "),t("div",{staticClass:"modal fade",attrs:{id:"choiceProductModal",tabindex:"-1","aria-labelledby":"myLargeModalLabel","aria-hidden":"true"}},[t("div",{staticClass:"modal-dialog modal-lg"},[t("div",{staticClass:"modal-content"},[e._m(3),e._v(" "),t("div",{staticClass:"modal-body"},[t("div",{staticClass:"row"},[t("div",{staticClass:"col-md-6 mb-2"},[t("div",{staticClass:"form-group"},[t("label",{attrs:{for:"exampleInputPassword1"}},[e._v("Cari Produk")]),e._v(" "),t("div",{staticClass:"input-group"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.searchItemProduct,expression:"searchItemProduct"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Search data"},domProps:{value:e.searchItemProduct},on:{input:[function(t){t.target.composing||(e.searchItemProduct=t.target.value)},function(t){return e.searchItemProductsMethod(t)}]}}),e._v(" "),e._m(4)])])])]),e._v(" "),t("div",{ref:"tableModalChoiceProduct",staticClass:"table-responsive",attrs:{id:"tableModalChoiceProduct"}},[t("table",{staticClass:"table table-hover table-bordered"},[e._m(5),e._v(" "),e.isLoading.fetchDataProducts?e._e():t("tbody",e._l(e.searchItemProduct.length>0?e.searchFilteredItemProducts:e.products,(function(o,r){return t("tr",{key:r,on:{click:function(t){return e.actionChoiceProduct(o)}}},[t("td",{staticClass:"text-center"},[e._v(e._s(r+1))]),e._v(" "),t("td",[e._v(" "+e._s(o.name?o.name:"")+" ")]),e._v(" "),t("td",[e._v(" "+e._s(e._f("currencyRupiah")(o.price))+" ")]),e._v(" "),e._m(6,!0)])})),0),e._v(" "),e.isLoading.fetchDataProducts?t("tbody",e._l(5,(function(o){return t("tr",{key:o},[t("td",{staticClass:"text-center"},[t("simple-shimmer",{style:{height:"25px",width:"100%",borderRadius:"2px"}})],1),e._v(" "),t("td",[t("simple-shimmer",{style:{height:"25px",width:"100%",borderRadius:"2px"}})],1),e._v(" "),t("td",[t("simple-shimmer",{style:{height:"25px",width:"100%",borderRadius:"2px"}})],1),e._v(" "),t("td",{staticClass:"text-center"},[t("simple-shimmer",{style:{height:"25px",width:"100%",borderRadius:"2px"}})],1)])})),0):e._e()])])]),e._v(" "),e._m(7)])])])])}),[function(){var e=this,t=e._self._c;return t("thead",[t("tr",{staticClass:"text-center"},[t("th",[e._v("No")]),e._v(" "),t("th",[e._v("Nama Produk")]),e._v(" "),t("th",[e._v("Harga")]),e._v(" "),t("th",[e._v("Quantity")]),e._v(" "),t("th",[e._v("Total Harga")]),e._v(" "),t("th",[e._v("Aksi")])])])},function(){var e=this._self._c;return e("b",[e("i",{staticClass:"mdi mdi-close"})])},function(){var e=this._self._c;return e("b",[e("i",{staticClass:"mdi mdi-cash-usd"}),this._v(" Uang Pas")])},function(){var e=this,t=e._self._c;return t("div",{staticClass:"modal-header"},[t("h5",{staticClass:"modal-title",attrs:{id:"titleLabelChoiceProductModal"}},[e._v("\n            PILIH PRODUK\n          ")]),e._v(" "),t("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[t("span",{attrs:{"aria-hidden":"true"}},[e._v("Ã—")])])])},function(){var e=this._self._c;return e("div",{staticClass:"input-group-append"},[e("button",{staticClass:"btn btn-sm btn-success",attrs:{type:"button"}},[e("i",{staticClass:"icon icon-search"})])])},function(){var e=this,t=e._self._c;return t("thead",[t("tr",{staticClass:"text-center"},[t("th",[e._v("No")]),e._v(" "),t("th",[e._v("Nama Produk")]),e._v(" "),t("th",[e._v("Harga")]),e._v(" "),t("th",[e._v("Action")])])])},function(){var e=this._self._c;return e("td",{staticClass:"text-center"},[e("button",{staticClass:"btn btn-sm btn-primary btn-icon-text",attrs:{type:"button"}},[e("i",{staticClass:"mdi mdi-cursor-pointer"}),this._v("\n                      Pilih\n                    ")])])},function(){var e=this._self._c;return e("div",{staticClass:"modal-footer"},[e("button",{staticClass:"btn btn-danger",attrs:{type:"button","data-dismiss":"modal"}},[this._v("\n            Close\n          ")])])}],!1,null,null,null);t.default=component.exports}}]);